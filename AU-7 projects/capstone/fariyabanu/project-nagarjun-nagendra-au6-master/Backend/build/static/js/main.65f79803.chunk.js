(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{173:function(e,t,a){e.exports=a(230)},226:function(e,t){},229:function(e,t,a){},23:function(e,t,a){e.exports=a.p+"static/media/user.2b156a14.jpg"},230:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(13),c=a.n(s),i=a(38),o=a(39),l=a(41),u=a(40),m=a(4),p=a.n(m),d=a(8),f=a(16),h=a(6),g=a(22),b=a(283),E=a(277),v=a(302),y=a(282),x=a(281),O=a(53),j=a(272),w=a(275),k=a(19),N=a(14),S=a(15),R=a.n(S),C=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,R.a.defaults.withCredentials=!0,(r=new FormData).append("firstName",e.firstName),r.append("lastName",e.lastName),r.append("photoURL",e.photoURL),t.next=8,R()({method:"Put",url:"/users/".concat(e.userId),data:r,headers:{"content-type":"multipart/form-data"}});case 8:n=t.sent,s=n.data,a({type:"UPDATEUSER",payload:{error:null,info:s,photoURL:s.photoURL,firstName:s.firstName,lastName:s.lastName}}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.log("adsfasdf",t.t0.response),a({type:"UPDATEUSER",payload:{error:t.t0.response?t.t0.response.data.message:"update error",info:null}});case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"post",url:"/users/login",data:{email:e.email,password:e.password}});case 3:r=t.sent,n=r.data,a({type:"LOGIN",payload:{error:null,user:n,isAuthenticated:!0}}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.response.data),a({type:"LOGIN",payload:{error:t.t0.response.data.error,info:null,isAuthenticated:!1,user:null}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},U=function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R.a.defaults.withCredentials=!0,e.next=4,R()("/users/alluser");case 4:a=e.sent,r=a.data,t({type:"ALLUSER",payload:{users:r}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},q=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"post",url:"/users/forgotpassword",data:{email:e.email}});case 3:r=t.sent,n=r.data,a({type:"FORGOTPASSWORD",payload:{useremail:e.email,info:n.message}}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("errtyu",t.t0.response.data),a({type:"FORGOTPASSWORD",payload:{error:t.t0.response.data.error,info:null}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("user",e),t.prev=1,t.next=4,R()({method:"post",url:"/users/Changepassword",data:{resetToken:e.resetToken,password:e.password,email:e.email}});case 4:r=t.sent,n=r.data,console.log("data",n),a({type:"CHANGEPASSWORD",payload:{user:n,error:null}}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0.response.data),a({type:"CHANGEPASSWORD",payload:{error:t.t0.response.data.error,info:null}});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},I=a(60),D=a.n(I),T=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",background:"#fff",padding:e.spacing(3),boxShadow:"0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function G(){var e=T(),t=Object(N.d)((function(e){return e.userState})),a=Object(k.e)(),s=Object(N.c)(),c=Object(r.useState)({email:"",password:"",isSubmitting:!1}),i=Object(g.a)(c,2),o=i[0],l=i[1],u=function(e,t){l(Object(h.a)(Object(h.a)({},o),{},Object(f.a)({},e,t)))},m=function(){var e=Object(d.a)(p.a.mark((function e(r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),l(Object(h.a)(Object(h.a)({},o),{},{isSubmitting:!0})),e.next=4,s(L(o));case 4:l(Object(h.a)(Object(h.a)({},o),{},{isSubmitting:!1})),t.error||a.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("div",{className:e.paper},n.a.createElement(O.a,{component:"h1",variant:"h5"},n.a.createElement("img",{src:D.a,alt:"user",style:{width:"100%"}})),n.a.createElement(O.a,{component:"h1",variant:"h5"},"Sign in"),n.a.createElement("form",{onSubmit:m,className:e.form,noValidate:!0},n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:o.email,onChange:function(e){return u("email",e.target.value)}}),n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:o.password,onChange:function(e){return u("password",e.target.value)}}),n.a.createElement(x.a,{item:!0,xs:!0,style:{float:"right"}},n.a.createElement(y.a,{href:"/#/forgotPassword",variant:"body2"},"Forgot password?")),t.error&&n.a.createElement(x.a,{item:!0,xs:12,className:"error"},n.a.createElement("div",{className:"error"},t.error)),n.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:o.isSubmitting},"Sign In"),n.a.createElement(x.a,{container:!0,justify:"center",className:"mt-2"},n.a.createElement(x.a,{item:!0},"Don't have an account?",n.a.createElement(y.a,{href:"/#/register",variant:"body2",className:"mt-2"},"Sign Up"))))))}var F=a(284),P=a(91),W=a.n(P),_=a(304),M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={firstName:"",firstNameError:"",lastName:"",lastNameError:"",email:"",emailError:"",password:"",passwordError:"",isSubmitting:!1,error:""},e.handleChange=function(t,a){var r=Object(h.a)({},e.state);r[t]=a,"firstName"===t&&(r.firstNameError="",r.firstName.match(/^[a-z ,.'-]{3,150}$/i)||(r.firstNameError="firstName is not valid"),""===r.firstName.trim()&&(r.firstNameError="First name is required")),"lastName"===t&&(r.lastNameError="",r.lastName.match(/^[a-z ,.'-]{3,150}$/i)||(r.lastNameError="lastName is not valid"),""===r.lastName.trim()&&(r.lastNameError="Last name is required")),"email"===t&&(r.emailError="",r.email.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)||(r.emailError="invalid email "),""===r.email.trim()&&(r.emailError="email is required")),"password"===t&&(r.passwordError="",r.password.length<5&&(r.passwordError="Can not be less than 5"),""===r.password.trim()&&(r.passwordError="password is required")),e.setState(r)},e.handleSubmit=function(){var t=Object(d.a)(p.a.mark((function t(a){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),""!==(r=Object(h.a)({},e.state)).firstName.trim()&&!r.firstNameError){t.next=6;break}return r.firstNameError=r.firstNameError||"first name is required",e.setState(r),t.abrupt("return");case 6:if(""!==r.lastName.trim()&&!r.lastNameError){t.next=10;break}return r.lastNameError=r.lastNameError||"last name is required",e.setState(r),t.abrupt("return");case 10:if(""!==r.email.trim()&&!r.emailError){t.next=14;break}return r.emailError=r.emailError||"email is required",e.setState(r),t.abrupt("return");case 14:if(""!==r.password.trim()&&!r.passwordError){t.next=18;break}return r.passwordError=r.passwordError||"password is required",e.setState(r),t.abrupt("return");case 18:return r.isSubmitting=!0,e.setState(r),t.next=22,e.props.registerUser(e.state);case 22:r.error=e.props.user.error,r.isSubmitting=!1,e.setState(r),e.props.user.error||e.props.history.push("/login");case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("div",{className:"register-paper"},n.a.createElement(O.a,{component:"h1",variant:"h5"},n.a.createElement("img",{src:D.a,alt:"user",style:{width:"100%"}})),n.a.createElement(O.a,{component:"h1",variant:"h5"},"Sign up"),n.a.createElement("form",{onSubmit:this.handleSubmit,className:"register-form",noValidate:!0},n.a.createElement(x.a,{container:!0,spacing:2},n.a.createElement(x.a,{item:!0,xs:12,sm:6},n.a.createElement(v.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",value:this.state.firstName,onChange:function(t){return e.handleChange("firstName",t.target.value)},error:!!this.state.firstNameError,helperText:this.state.firstNameError})),n.a.createElement(x.a,{item:!0,xs:12,sm:6},n.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",value:this.state.lastName,onChange:function(t){return e.handleChange("lastName",t.target.value)},error:!!this.state.lastNameError,helperText:this.state.lastNameError})),n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:this.state.email,onChange:function(t){return e.handleChange("email",t.target.value)},error:!!this.state.emailError,helperText:this.state.emailError})),n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:function(t){return e.handleChange("password",t.target.value)},error:!!this.state.passwordError,helperText:this.state.passwordError})),n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(v.a,{accept:"image/*",id:"icon-button-file",type:"file",className:"register-input",onChange:function(t){return e.handleChange("photoURL",t.target.files[0])}}),n.a.createElement("label",{htmlFor:"icon-button-file"},n.a.createElement(_.a,{title:"Upload Photo"},n.a.createElement(F.a,{color:"primary","aria-label":"upload picture",component:"span"},n.a.createElement(W.a,null))))),this.state.error&&n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement("div",{className:"error"},this.state.error))),n.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"register-submit",disabled:this.state.isSubmitting},"Sign Up"),n.a.createElement(x.a,{container:!0,justify:"center",className:"mt-2"},n.a.createElement(x.a,{item:!0},"Already have an account?",n.a.createElement(y.a,{href:"/#/login",variant:"body2"},"Sign in"))))))}}]),a}(r.Component),Q=Object(N.b)((function(e){return{user:e.userState}}),{registerUser:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(r=new FormData).append("firstName",e.firstName),r.append("lastName",e.lastName),r.append("email",e.email),r.append("password",e.password),e.photoURL&&r.append("photoURL",e.photoURL,e.photoURL.name),t.next=9,R()({method:"post",url:"/users/register",data:r,headers:{"content-type":"multipart/form-data",Accept:"application/json",type:"formData"}});case 9:n=t.sent,s=n.data,a({type:"REGISTER",payload:{error:null,info:s}}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),a({type:"REGISTER",payload:{error:t.t0.response.data.error,info:null}});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()}})(M),z=a(305),H=a(92),B=a.n(H),J=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",background:"#fff",padding:e.spacing(3),boxShadow:"0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),V=Object(N.b)((function(e){return{useremail:e.userState}}),{forgotPassword:q})((function(e){var t=J(),a=Object(k.e)(),s=Object(N.c)(),c=Object(r.useState)({email:"",isSubmitting:!1}),i=Object(g.a)(c,2),o=i[0],l=i[1],u=function(){var t=Object(d.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("state",o),r.preventDefault(),l(Object(h.a)(Object(h.a)({},o),{},{isSubmitting:!0})),t.next=5,s(q(o));case 5:l(Object(h.a)(Object(h.a)({},o),{},{isSubmitting:!1})),console.log(e.useremail.error),e.useremail.error||a.push("/Resetpassword/"+o.email);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("div",{className:t.paper},n.a.createElement(z.a,{className:t.avatar},n.a.createElement(B.a,null)),n.a.createElement(O.a,{component:"h1",variant:"h5"},"Forgot Password"),n.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:u},n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:o.email,onChange:function(e){return t="email",a=e.target.value,void l(Object(h.a)(Object(h.a)({},o),{},Object(f.a)({},t,a)));var t,a}}),n.a.createElement(x.a,null,n.a.createElement("div",{className:"error"},e.useremail.error)),n.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,disabled:o.isSubmitting},"Send Reset Link"),n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:!0}),n.a.createElement(x.a,{item:!0},"Back to",n.a.createElement(y.a,{href:"/#/login",variant:"body2",className:"mt-2"}," Sign in"))))))})),$=a(3),X=a(17),Y=a(27),K=a(308),Z=a(285),ee=a(286),te=a(280),ae=a(291),re=a(154),ne=a.n(re),se=a(153),ce=a.n(se),ie=a(231),oe=a(292),le=a(155),ue=a.n(le),me=a(157),pe=a.n(me),de=a(156),fe=a.n(de),he=a(161),ge=a(290),be=a(30),Ee=a(152),ve=a.n(Ee),ye=a(307),xe=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"post",url:"/group",data:{groupName:e.groupName,photoURL:e.photoURL}});case 3:r=t.sent,n=r.data,a({type:"CREATEGROUP",payload:{error:null,group:n}}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),a({type:"CREATEGROUP",payload:{error:t.t0.response.data.error,group:null}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Oe=function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R()("/group/find");case 3:a=e.sent,r=a.data,t({type:"FINDGROUP",payload:r}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data),t({type:"FINDGROUP",payload:{error:e.t0.response.data.error,group:null}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},je=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"post",url:"/users/search",data:e});case 3:r=t.sent,n=r.data,a({type:"SEARCHUSER",payload:{searchQuery:n}}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data),a({type:"SEARCHUSER",payload:{error:t.t0.response.data.error,payload:null}});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},we=a(287),ke=a(23),Ne=a.n(ke),Se=a(288),Re=a(289),Ce=Object(j.a)((function(e){return{root:{display:"flex",height:"70px"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(f.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},menuLogo:{display:"flex",alignItems:"center"},user:{textTransform:"uppercase",background:"#fff",color:"#000",borderRadius:"50%",width:"38px",height:"38px",display:"flex",alignItems:"center",fontSize:"1.3rem"},search:Object(f.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(X.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(X.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"500px"},inputInput:Object(f.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width")},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),rootclick:{position:"relative"},dropdown:{position:"absolute",right:0,left:0,zIndex:1,padding:"8px",border:"1px solid",backgroundColor:"#3f51b5",color:"black",borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"}}}));var Le=Object(N.b)((function(e){return{user:e.userState.user,isAuth:e.isAuthenticated,group:e.groupReducer,userState:e.userState}}),{logout:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R()({method:"delete",url:"/users/logout"});case 3:t({type:"LOGOUT",payload:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},searchUser:je})((function(e){var t,a,s=Ce(),c=Object(Y.a)(),i=Object(k.e)(),o=n.a.useState(!1),l=Object(g.a)(o,2),u=l[0],m=l[1],b=n.a.useState(!1),v=Object(g.a)(b,2),y=v[0],j=v[1],w=n.a.useState(null),N=Object(g.a)(w,2),S=N[0],R=N[1],C=Object(r.useState)({searchQuery:"",searchQueryResult:null,users:null}),L=Object(g.a)(C,2),U=L[0],q=L[1],A=function(){R(null)},I=function(){var t=Object(d.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.logout();case 2:i.push("/login");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){e.userState.isAuthenticated||i.push("/login")}),[e,i]);var T=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),j((function(e){return!e})),t.next=4,e.searchUser({searchQuery:U.searchQuery});case 4:q(Object(h.a)(Object(h.a)({},U),{},{searchQueryResult:e.group.searchQuery}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.push("/user/".concat(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:s.root},n.a.createElement(E.a,null),n.a.createElement(Z.a,{position:"fixed",className:Object($.a)(s.appBar,Object(f.a)({},s.appBarShift,u))},n.a.createElement(ee.a,{style:{justifyContent:"space-between"}},n.a.createElement("div",{className:s.menuLogo},n.a.createElement(O.a,{variant:"h6",noWrap:!0,style:{width:"50px",height:"50px",borderRadius:"50%"}},n.a.createElement(be.b,{to:"/",style:{textDecoration:"none"}},n.a.createElement("img",{src:D.a,alt:"user",style:{width:"100%",cursor:"pointer"}}))),n.a.createElement("form",{className:s.search,style:{marginLeft:"100px"},onSubmit:T},n.a.createElement("div",{className:s.searchIcon},n.a.createElement(ve.a,{type:"submit"})),n.a.createElement(ye.a,{placeholder:"Search\u2026",classes:{root:s.inputRoot,input:s.inputInput},value:U.searchQuery,inputProps:{"aria-label":"search"},onChange:function(e){return t="searchQuery",a=e.target.value,void q(Object(h.a)(Object(h.a)({},U),{},Object(f.a)({},t,a)));var t,a}}),n.a.createElement(we.a,{onClickAway:function(){j(!1),q(Object(h.a)(Object(h.a)({},U),{},{searchQuery:""}))}},n.a.createElement("div",{className:s.rootclick},n.a.createElement("div",null,y?n.a.createElement("div",{className:s.dropdown},n.a.createElement(x.a,{style:{margin:"10px 0"},container:!0,direction:"column"},U.searchQueryResult&&U.searchQueryResult.map((function(e){return n.a.createElement(x.a,{item:!0,key:e._id,onClick:function(){return G(e._id)}},n.a.createElement(_.a,{title:"click for seen user Details","aria-label":"add"},n.a.createElement(Se.a,{style:{cursor:"pointer"}},n.a.createElement(Re.a,{avatar:n.a.createElement(z.a,{alt:"user",src:e.photoURL||Ne.a}),title:e.firstName+" "+e.lastName}))))})))):null))))),e.user&&n.a.createElement("div",null,n.a.createElement(F.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){R(e.currentTarget)},color:"inherit"},n.a.createElement("div",null),e.user.photoURL?n.a.createElement("img",{src:e.user.photoURL,alt:e.user.firstName,className:s.user}):n.a.createElement("span",{className:s.user,style:{padding:4}},e.user.firstName[0],e.user.lastName[0])),n.a.createElement(he.a,{id:"simple-menu",anchorEl:S,keepMounted:!0,open:Boolean(S),onClose:A},n.a.createElement(ge.a,{onClick:A},n.a.createElement(be.b,{to:"/profile",style:{color:"black",textDecoration:"none"}},"Profile")),n.a.createElement(ge.a,{onClick:I},"Logout"))))),n.a.createElement(K.a,{variant:"permanent",className:Object($.a)(s.drawer,(t={},Object(f.a)(t,s.drawerOpen,u),Object(f.a)(t,s.drawerClose,!u),t)),classes:{paper:Object($.a)((a={},Object(f.a)(a,s.drawerOpen,u),Object(f.a)(a,s.drawerClose,!u),a))}},n.a.createElement("div",{className:s.toolbar},n.a.createElement(F.a,{onClick:function(){m(!1)}},"rtl"===c.direction?n.a.createElement(ce.a,null):n.a.createElement(ne.a,null))),n.a.createElement(ae.a,null),n.a.createElement(te.a,null,n.a.createElement(ie.a,{button:!0},n.a.createElement(be.b,{to:"/",style:{textDecoration:"none"}},n.a.createElement(oe.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"30px"}},n.a.createElement(ue.a,null),n.a.createElement(O.a,{variant:"body2"},"Home")))),n.a.createElement(ie.a,{button:!0},n.a.createElement(be.b,{to:"/friend",style:{textDecoration:"none"}},n.a.createElement(oe.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"30px"}},n.a.createElement(fe.a,null),n.a.createElement(O.a,{variant:"body2"},"Friend")))),n.a.createElement(ie.a,{button:!0},n.a.createElement(be.b,{to:"/group",style:{textDecoration:"none"}},n.a.createElement(oe.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"30px"}},n.a.createElement(pe.a,null),n.a.createElement(O.a,{variant:"body2"},"Group")))))),n.a.createElement("main",{className:s.content},n.a.createElement("div",{className:s.toolbar})))})),Ue=a(294),qe=a(293),Ae=a(116),Ie=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,t.next=4,R()({method:"post",url:"/request",data:e});case 4:r=t.sent,n=r.data,a({type:"REQUEST",payload:{error:null,request:n}}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),a({type:"REQUEST",payload:{error:t.t0.response.data.error,request:null}});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},De=a(306),Te=a(303),Ge=a(295),Fe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={users:null,snackbarOpen:!1,snackbarMessage:"",snackbarSeverity:"success"},e.connect=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.sendRequest({receiver:a,sender:e.props.userState.user.id});case 2:e.props.request.error?e.setState({snackbarOpen:!0,snackbarMessage:e.props.request.error,snackbarSeverity:"error"}):e.setState({snackbarOpen:!0,snackbarMessage:e.props.request.request.message});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.acceptGroupRequest=function(){var t=Object(d.a)(p.a.mark((function t(a,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.updatetRequest({isAccepted:!0,id:a,groupId:r});case 2:return e.setState({snackbarOpen:!0,snackbarMessage:"Accept request successfully"}),t.next=5,e.props.allRequest();case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.Accept=function(){var t=Object(d.a)(p.a.mark((function t(a,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.updatetRequest({isAccepted:!0,id:a,friend:r});case 2:return e.setState({snackbarOpen:!0,snackbarMessage:"Accept request successfully"}),t.next=5,e.props.allRequest();case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.Reject=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.updatetRequest({isReject:!0,id:a});case 2:return e.setState({snackbarOpen:!0,snackbarMessage:"Reject request successfully",snackbarSeverity:"error"}),t.next=5,e.props.allRequest();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showSnackbar=function(){return n.a.createElement(De.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.state.snackbarOpen,onClose:function(){e.setState({snackbarOpen:!1})},autoHideDuration:3e3},n.a.createElement(Te.a,{severity:e.state.snackbarSeverity,variant:"filled"},e.state.snackbarMessage))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.userState.user){e.next=10;break}if(this.props.userState.users){e.next=4;break}return e.next=4,this.props.allUser();case 4:return e.next=6,this.props.allRequest();case 6:return this.setState({users:this.props.userState.users}),e.next=9,this.props.updatetRequest();case 9:console.log(this.props,"user");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"backgrnd-home",style:{marginLeft:"100px"}},n.a.createElement(Le,null),this.state.users?n.a.createElement("div",{className:"row"},n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{container:!0,item:!0,spacing:3,xs:12,sm:12,md:8},this.state.users&&this.state.users.map((function(t){return n.a.createElement(x.a,{item:!0,xs:12,sm:4,key:t._id},n.a.createElement(Se.a,{style:{maxWidth:"200px"},className:"col-2"},n.a.createElement(qe.a,{className:"user-image",component:"img",image:t.photoURL||Ne.a,title:"user image"}),n.a.createElement(Ue.a,{style:{justifyContent:"center",flexDirection:"column"}},n.a.createElement(O.a,{style:{fontWeight:"bold"}},t.firstName+" "+t.lastName),n.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:function(){return e.connect(t._id)}},"Add Friend"))))}))),n.a.createElement(x.a,{item:!0,xs:12,sm:12,md:4},n.a.createElement(Ae.a,{style:{padding:"1rem"}},n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("h3",null,"Requests"),this.props.request.requests.length>0?n.a.createElement("div",null,this.props.request.requests&&this.props.request.requests.map((function(t){return n.a.createElement(Ae.a,{key:t._id,style:{margin:"10px",padding:"0 10px"}},t.sender&&n.a.createElement(x.a,{container:!0,spacing:1,justify:"space-between",alignItems:"center"},n.a.createElement(x.a,{item:!0},n.a.createElement("img",{alt:"user",src:t.sender.photoURL||Ne.a,style:{width:"40px",height:"40px",borderRadius:"50px"}})),n.a.createElement(x.a,{item:!0},t.sender.firstName+" "+t.sender.lastName),n.a.createElement(x.a,{item:!0},n.a.createElement(b.a,{size:"small",color:"primary",className:"request-btn",variant:"contained",onClick:function(){return e.Accept(t._id,t.sender._id)}},"Accept")),n.a.createElement(x.a,{item:!0},n.a.createElement(b.a,{size:"small",className:"request-btn",color:"secondary",variant:"contained",onClick:function(){return e.Reject(t._id)}},"Reject"))),t.groupId&&n.a.createElement(x.a,{container:!0,spacing:1,justify:"space-between",alignItems:"center"},n.a.createElement(x.a,{item:!0},n.a.createElement("img",{alt:"user",src:t.groupId.photoURL||Ne.a,style:{width:"40px",height:"40px",borderRadius:"50px"}})),n.a.createElement(x.a,{item:!0},t.groupId.groupName),n.a.createElement(x.a,{item:!0},n.a.createElement(b.a,{size:"small",color:"primary",variant:"contained",onClick:function(){return e.acceptGroupRequest(t._id,t.groupId._id)}},"Accept")),n.a.createElement(x.a,{item:!0},n.a.createElement(b.a,{size:"small",color:"secondary",variant:"contained",onClick:function(){return e.Reject(t._id)}},"Reject"))))}))):n.a.createElement("div",null,"No request")))))):n.a.createElement("div",{className:"loader"},n.a.createElement(Ge.a,null)),this.showSnackbar())}}]),a}(r.Component),Pe=Object(N.b)((function(e){return{userState:e.userState,request:e.requestReducer}}),{allUser:U,sendRequest:Ie,allRequest:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R()("/request/all");case 3:a=e.sent,r=a.data,t({type:"ALLREQUEST",payload:{requests:r}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},updatetRequest:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"put",url:"/request/update",data:e});case 3:r=t.sent,n=r.data,a({type:"UPDATEREQUEST",payload:{error:null,update:n}}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data),a({type:"UPDATEREQUEST",payload:{error:t.t0.response.data.error,request:null}});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})(Fe),We=a(232),_e=a(158),Me=a.n(_e),Qe=Object(j.a)((function(e){return{input:{display:"none"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),ze=Object(N.b)((function(e){return{user:e.userState.user,isAuth:e.isAuthenticated}}))((function(e){var t,a,s,c,i,o,l=Qe(),u=Object(N.d)((function(e){return e.userState})),m=Object(k.e)(),f=Object(N.c)(),y=Object(r.useState)({userId:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id,token:null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.token,firstName:null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.firstName,lastName:null===e||void 0===e||null===(c=e.user)||void 0===c?void 0:c.lastName,email:null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.email,isSubmitting:!1,removePhoto:!1,photoURL:null===e||void 0===e||null===(o=e.user)||void 0===o?void 0:o.photoURL,file:null}),O=Object(g.a)(y,2),j=O[0],S=O[1],R=function(e,t){var a=Object(h.a)({},j);a[e]=t,S(a)},L=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),j.photoURL||j.firstName||j.lastName){e.next=3;break}return e.abrupt("return");case 3:return(a=Object(h.a)({},j)).removePhoto?a.photoURL=null:a.photoURL=a.file||a.photoURL,a.isSubmitting=!0,S(a),console.log(a),e.next=10,f(C(a));case 10:a.isSubmitting=!1,a.removePhoto=!1,S(a),u.error||m.push("/profile");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var t=Object(d.a)(p.a.mark((function t(a){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e.user),a.preventDefault(),(r=Object(h.a)({},j)).photoURL=null,r.file=null,r.removePhoto=!0,S(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return e.user&&n.a.createElement("div",null,n.a.createElement(Le,null),n.a.createElement("main",{className:"backgrnd",style:{marginLeft:"100px",textAlign:"center",marginTop:"50px "}},n.a.createElement("div",{style:{marginBottom:"40px"}},j.file?n.a.createElement("img",{src:URL.createObjectURL(j.file),style:{borderRadius:"50%",width:"200px",height:"200px"},alt:e.user.firstName}):j.photoURL?n.a.createElement("img",{src:j.photoURL,style:{borderRadius:"50%",width:"200px",height:"200px"},alt:e.user.firstName}):n.a.createElement("span",{style:{background:"gray",borderRadius:"50%",width:"50%",height:"50%",padding:"40px",color:"#000",fontSize:"50px",textTransform:"uppercase"}},e.user.firstName[0],e.user.lastName[0])),n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("form",{onSubmit:L,noValidate:!0},n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(_.a,{title:"Remove Photo"},n.a.createElement(F.a,{color:"secondary","aria-label":"upload picture",component:"span",disabled:j.isSubmitting,onClick:U},n.a.createElement(Me.a,null))),n.a.createElement("input",{accept:"image/*",id:"icon-button-file",type:"file",className:l.input,onChange:function(e){return R("file",e.target.files[0])}}),n.a.createElement("label",{htmlFor:"icon-button-file"},n.a.createElement(_.a,{title:"Upload Photo"},n.a.createElement(F.a,{color:"primary","aria-label":"upload picture",component:"span"},n.a.createElement(W.a,null))))),n.a.createElement(x.a,{container:!0,spacing:2},n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(v.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",value:j.firstName,onChange:function(e){return R("firstName",e.target.value)},error:!!j.firstNameError,helperText:j.firstNameError})),n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",value:j.lastName,onChange:function(e){return R("lastName",e.target.value)},error:!!j.lastNameError,helperText:j.lastNameError}))),n.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary",style:{margin:"10px"},disabled:j.isSubmitting},"Update Details"))),n.a.createElement("h3",null,"Name: ",e.user.firstName+" "+e.user.lastName),n.a.createElement("h3",null,"Email: ",e.user.email)),n.a.createElement(We.a,{className:l.backdrop,open:j.isSubmitting},n.a.createElement(Ge.a,{color:"inherit"})))})),He=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",background:"#fff",padding:e.spacing(3),boxShadow:"0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Be=Object(N.b)((function(e){return console.log(e),{user:e.userState}}),{changePassword:A})((function(e){var t=He(),a=Object(k.e)(),s=Object(N.c)(),c=Object(r.useState)({resetToken:"",password:"",isSubmitting:!1,email:e.match.params.email}),i=Object(g.a)(c,2),o=i[0],l=i[1],u=function(e,t){l(Object(h.a)(Object(h.a)({},o),{},Object(f.a)({},e,t)))},m=function(){var t=Object(d.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),l(Object(h.a)(Object(h.a)({},o),{},{isSubmitting:!0})),t.next=4,s(A(o));case 4:l(Object(h.a)(Object(h.a)({},o),{},{isSubmitting:!1})),e.user.error||a.push("/login");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("div",{className:t.paper},n.a.createElement(z.a,{className:t.avatar},n.a.createElement(B.a,null)),n.a.createElement(O.a,{component:"h1",variant:"h5"},"Reset Password"),n.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:m},n.a.createElement(x.a,null,n.a.createElement("h2",null," ",e.match.params.email)),n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"resetToken",label:"resetToken",type:"resetToken",id:"resetToken",autoComplete:"resetToken",value:o.resetToken,onChange:function(e){return u("resetToken",e.target.value)}}),n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:o.password,onChange:function(e){return u("password",e.target.value)}}),n.a.createElement(x.a,null,n.a.createElement("div",{className:"error"},e.user.error)),n.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Change Password"),n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:!0}),n.a.createElement(x.a,{item:!0},"Back to",n.a.createElement(y.a,{href:"/",variant:"body2",className:"mt-2"}," Sign in"))))))})),Je=a(115),Ve=a(98),$e=a(296),Xe=a(95),Ye=a.n(Xe),Ke=a(97),Ze=a.n(Ke),et=a(93),tt=a(279),at=a(94),rt=a.n(at),nt=a(96),st=a.n(nt),ct=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={friends:null,selectFriend:null,message:"",messages:[],user:e.props.user.user,loading:!1,openemoji:!1,chosenEmoji:null},e.messageRef=n.a.createRef(),e.socket=null,e.sendMessage=function(){var t=Object(d.a)(p.a.mark((function t(a){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),r={name:e.state.user.firstName+" "+e.state.user.lastName,photoURL:e.state.user.photoURL||null,sender:e.state.user.id,message:e.state.message,socketId:e.state.selectFriend.socketId,receiver:e.state.selectFriend._id},e.state.message&&(e.socket.emit("one-2-one",r),e.setState(Object(h.a)(Object(h.a)({},e.state),{},{message:""})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderCards=function(){console.log("inside renderrrr",e.props.chats),e.props.chats.chats&&e.props.chats.chats.chats.map((function(e){return{}}))},e.handleFrndChat=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.unread=0,t.next=3,e.setState({selectFriend:a});case 3:return e.setState({loading:!0}),t.next=6,e.props.singleChat(a._id);case 6:return t.next=8,e.setState({messages:e.props.chats.singleMessages});case 8:return t.next=10,e.setState({loading:!1});case 10:e.scrollToBottom();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeHandler=function(t){console.log(t.target.files[0]);var a={name:e.state.user.firstName+" "+e.state.user.lastName,photoURL:e.state.user.photoURL||null,sender:e.state.user.id,file:t.target.files[0],fileName:t.target.files[0].name,type:t.target.files[0].type,socketId:e.state.selectFriend.socketId,receiver:e.state.selectFriend._id};e.socket.emit("single-fileupload",a)},e.handleClickEmoji=function(){e.setState({openemoji:!0})},e.handleClickAwayEmoji=function(){e.setState({openemoji:!1})},e.onEmojiClick=function(){var t=Object(d.a)(p.a.mark((function t(a,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState(Object(h.a)(Object(h.a)({},e.state),{},{message:e.state.message+r.emoji}));case 2:e.setState({chosenEmoji:!1});case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.scrollToBottom=function(){e.messageRef.current&&e.messageRef.current.scrollIntoView()},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.allFriends();case 2:return e.next=4,this.setState({friends:this.props.friend.friends.friends});case 4:this.socket=et("/"),this.socket.emit("user-join",this.props.user.user.id),this.socket.on("user-join",function(){var e=Object(d.a)(p.a.mark((function e(a){var r,n,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(Ve.a)(t.state.friends),n=Object(Je.a)(r);try{for(n.s();!(s=n.n()).done;)(c=s.value).unread=0,c._id===a.userId&&(c.socketId=a.socketId)}catch(i){n.e(i)}finally{n.f()}return e.next=5,t.setState({friends:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.socket.on("one-2-one",(function(e){if(e.sender===t.state.user.id||t.state.selectFriend&&t.state.selectFriend._id===e.sender){var a=Object(Ve.a)(t.state.messages);a.push(e),t.setState({messages:a})}else{var r,n=Object(Ve.a)(t.state.friends),s=Object(Je.a)(n);try{for(s.s();!(r=s.n()).done;){var c=r.value;c._id===e.sender&&(c.unread=c.unread?c.unread+1:1)}}catch(i){s.e(i)}finally{s.f()}t.setState({friends:n})}t.scrollToBottom()}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"handleSave",value:function(e){this.setState({files:e,open:!1}),console.log(e)}},{key:"handleOpen",value:function(){this.setState({open:!0})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"backgrnd",style:{marginLeft:"100px"}},n.a.createElement(Le,null),this.state.friends?n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,sm:3},n.a.createElement("div",{className:"friend-list"},n.a.createElement(x.a,{container:!0,direction:"column",alignItems:"flex-start"},this.state.friends&&this.state.friends.map((function(t){return n.a.createElement(x.a,{item:!0,key:t._id,style:{margin:"10px 0"}},n.a.createElement(Se.a,{className:"backgrnd",onClick:function(){return e.handleFrndChat(t)},style:e.state.selectFriend&&e.state.selectFriend._id===t._id?{backgroundColor:"#bbb"}:{cursor:"pointer"}},n.a.createElement(Re.a,{avatar:n.a.createElement(z.a,{alt:"user",src:t.photoURL||Ne.a}),title:t.firstName+" "+t.lastName,action:n.a.createElement("span",{className:"unread"},t.unread>0&&t.unread),subheader:n.a.createElement("div",null,"Last seen:",new Date(t.updatedAt).toLocaleTimeString())})))}))))),n.a.createElement(x.a,{item:!0,sm:9},n.a.createElement("div",null,this.state.selectFriend?n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.a.createElement(Z.a,{position:"relative",style:{background:"#37474f"}},n.a.createElement(ee.a,null,n.a.createElement(O.a,{variant:"h6",className:"title",noWrap:!0},n.a.createElement(Re.a,{avatar:n.a.createElement(z.a,{alt:"user",src:this.state.selectFriend.photoURL||Ne.a}),title:this.state.selectFriend.firstName+" "+this.state.selectFriend.lastName,subheader:n.a.createElement("div",{className:"time"},"Last seen:",new Date(this.state.selectFriend.updatedAt).toLocaleTimeString()+" "+new Date(this.state.selectFriend.updatedAt).toLocaleDateString())})),n.a.createElement(_.a,{title:"Share documents","aria-label":"add"},n.a.createElement($e.a,{size:"small",style:{marginRight:"8px"}},n.a.createElement("input",{accept:"image/*,video/*,application/pdf",className:"input",id:"icon-button-file",type:"file",onChange:this.onChangeHandler}),n.a.createElement("label",{htmlFor:"icon-button-file"},n.a.createElement(F.a,{type:"file","aria-label":"upload picture",component:"span"},n.a.createElement(Ye.a,null))))))),n.a.createElement("div",{className:"chat-box"},n.a.createElement(x.a,{className:"messages"},this.state.loading&&n.a.createElement("div",{className:"loader"},n.a.createElement(Ge.a,null)),this.state.messages.map((function(t){return n.a.createElement(x.a,{item:!0,xs:12,key:t._id,style:{padding:"8px"},ref:e.messageRef},n.a.createElement("div",{className:"message"},n.a.createElement(z.a,{className:"message-photo",src:t.photoURL||Ne.a,alt:"message"}),n.a.createElement("div",{className:"message-name"},t.name)),t.file?n.a.createElement(n.a.Fragment,null,-1!==(null===t||void 0===t?void 0:t.type.indexOf("video"))?n.a.createElement("video",{width:"320",height:"240",controls:!0,autoPlay:!0},n.a.createElement("source",{src:"/uploads/".concat(t.file),type:t.type})):-1!==(null===t||void 0===t?void 0:t.type.indexOf("pdf"))||-1!==(null===t||void 0===t?void 0:t.type.indexOf("text"))?n.a.createElement("div",{className:"message-content"},n.a.createElement("a",{className:"send-link",target:"_blank",rel:"noopener noreferrer",href:"/uploads/"+t.file},t.fileName||"open pdf")):n.a.createElement("img",{className:"message-file",src:"/uploads/".concat(t.file),alt:t.file})):n.a.createElement("div",{className:"message-content"},t.message))}))),n.a.createElement("form",{className:"message-form",onSubmit:this.sendMessage},n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:1,sm:1},n.a.createElement("div",null,n.a.createElement(we.a,{onClickAway:this.handleClickAwayEmoji},n.a.createElement("div",null,n.a.createElement(st.a,{onClick:this.handleClickEmoji,style:{cursor:"pointer"}}),this.state.openemoji?n.a.createElement(tt.a,null,n.a.createElement("div",{className:"emoji-class"},n.a.createElement(rt.a,{onEmojiClick:this.onEmojiClick}))):null)))),n.a.createElement(x.a,{item:!0,xs:9,sm:10},n.a.createElement(v.a,{fullWidth:!0,name:"message",variant:"outlined",autoComplete:"off",size:"small",value:this.state.message,onChange:function(t){return e.setState({message:t.target.value})}})),n.a.createElement(x.a,{item:!0,xs:2,sm:1},n.a.createElement($e.a,{style:{width:"40px",height:"40px"},type:"submit"},n.a.createElement(Ze.a,null))))))):n.a.createElement("div",null,0===this.state.friends.length?n.a.createElement("h1",null,"You don't have any friend."):n.a.createElement("h1",null,"Click on any friend to start conversation."))))):n.a.createElement("div",{className:"loader"},n.a.createElement(Ge.a,null)))}}]),a}(r.Component),it=Object(N.b)((function(e){return{friend:e.requestReducer,user:e.userState,chats:e.chatReducer}}),{allFriends:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R()("/users/friend");case 3:a=e.sent,r=a.data,t({type:"FRIENDS",payload:{friends:r}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},singleChat:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,R.a.defaults.withCredentials=!0,t.next=4,R()("/chat/single/".concat(e));case 4:r=t.sent,n=r.data,a({type:"SINGLECHAT",payload:{singleMessages:n}}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data),a({type:"SINGLECHAT",payload:{error:t.t0.response.data.error,group:null}});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})(ct),ot=a(297),lt=a(301),ut=a(299),mt=a(300),pt=a(298),dt=a(159),ft=a.n(dt),ht=Object(j.a)((function(e){return{root:{flexGrow:1,width:"100%"},root1:{display:"flex",justifyContent:"center",height:"100vh",alignItems:"center"},title:Object(f.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(f.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(X.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(X.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(f.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),input:{display:"none"},dropdown:{position:"fixed",width:200,top:"50%",left:"50%",transform:"translate(-50%, -50%)",border:"1px solid",padding:e.spacing(1),backgroundColor:e.palette.background.paper}}})),gt=Object(N.b)((function(e){return{userState:e.userState,group:e.groupReducer,request:e.requestReducer,chat:e.chatReducer}}),{createGroup:xe,findGroups:Oe,searchUser:je,sendRequest:Ie,allMessage:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,R.a.defaults.withCredentials=!0,t.next=4,R()("/chat/".concat(e));case 4:r=t.sent,n=r.data,a({type:"ALLMESSAGE",payload:{messages:n}}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data),a({type:"ALLMESSAGE",payload:{error:t.t0.response.data.error,group:null}});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(r.useRef)(),a=ht(),s=n.a.useState(!1),c=Object(g.a)(s,2),i=c[0],o=c[1],l=n.a.useState(!1),u=Object(g.a)(l,2),m=u[0],E=u[1],y=n.a.useState(!1),j=Object(g.a)(y,2),w=j[0],k=j[1],S=Object(N.c)(),R=Object(r.useState)({groupName:null,isSubmitting:null,photoURL:null,searchQuery:null,searchQueryResult:null,selectedGroup:null,snackbarOpen:!1,snackbarMessage:"",snackbarSeverity:"success",user:e.userState.user,message:""}),C=Object(g.a)(R,2),L=C[0],U=C[1],q=function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(Object(h.a)(Object(h.a)({},L),{},{message:L.message+a.emoji}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=Object(r.useState)(!1),I=Object(g.a)(A,2),D=I[0],T=I[1],G=Object(r.useState)([]),P=Object(g.a)(G,2),W=P[0],M=P[1],Q=et("/"),H=function(){E(!1)},B=function(){k(!1)},J=function(e,t){U(Object(h.a)(Object(h.a)({},L),{},Object(f.a)({},e,t)))},V=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return U(Object(h.a)(Object(h.a)({},L),{},{isSubmitting:!0})),t.next=3,S(xe(L));case 3:U(Object(h.a)(Object(h.a)({},L),{},{isSubmitting:!1})),e.findGroups(),E(!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.searchUser({searchQuery:L.searchQuery});case 2:U(Object(h.a)(Object(h.a)({},L),{},{searchQueryResult:e.group.searchQuery}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendRequest({receiver:a,groupId:L.selectedGroup._id});case 2:e.request.error?U(Object(h.a)(Object(h.a)({},L),{},{snackbarOpen:!0,snackbarMessage:e.request.error,snackbarSeverity:"error"})):U(Object(h.a)(Object(h.a)({},L),{},{snackbarOpen:!0,snackbarMessage:e.request.request.message})),k(!1),setTimeout((function(){U(Object(h.a)(Object(h.a)({},L),{},{selectedGroup:L.selectedGroup}))}),2e3);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){S(Oe())}),[S]),Q.on("message",(function(e){M((function(t){return t.concat(e)})),te()}));var Y=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return U(Object(h.a)(Object(h.a)({},L),{},{selectedGroup:a})),T(!0),t.next=4,e.allMessage(a._id);case 4:M(e.chat.messages),T(!1),Q.emit("join",a._id),te();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a={name:L.user.firstName+" "+L.user.lastName,photoURL:L.user.photoURL||null,sender:L.user.id,message:L.message,groupId:L.selectedGroup._id},L.message&&(Q.emit("message",a),U(Object(h.a)(Object(h.a)({},L),{},{message:""})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){t.current&&t.current.scrollIntoView()};return n.a.createElement("div",{className:"backgrnd",style:{marginLeft:"100px"}},n.a.createElement(Le,null),e.group.groups?n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,sm:3,style:{marginTop:"25px"}},n.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:function(){E(!0)}},"Create a New Group"),n.a.createElement(ot.a,{open:m,onClose:H,"aria-labelledby":"form-dialog-title"},n.a.createElement(pt.a,{id:"form-dialog-title"},"New Group"),n.a.createElement(ut.a,null,n.a.createElement(mt.a,null,"To create a new group"),n.a.createElement(v.a,{autoFocus:!0,margin:"dense",id:"Group name",label:" Group name",type:"text",fullWidth:!0,required:!0,onChange:function(e){return J("groupName",e.target.value)}}),n.a.createElement(v.a,{margin:"dense",id:"group logo",label:" Group logo",type:"text",fullWidth:!0,required:!0,onChange:function(e){return J("photoURL",e.target.value)}})),n.a.createElement(lt.a,null,n.a.createElement(b.a,{onClick:H,color:"primary"},"Cancel"),n.a.createElement(b.a,{onClick:V,disabled:L.isSubmitting||!(L.photoURL&&L.groupName),color:"primary"},"Done"))),n.a.createElement("div",{className:"group-list"},n.a.createElement(x.a,{container:!0,direction:"column",alignItems:"flex-start"},e.group.groups&&e.group.groups.map((function(e){return n.a.createElement(x.a,{item:!0,key:e._id,style:{margin:"10px 0"}},n.a.createElement(Se.a,{onClick:function(){return Y(e)},style:L.selectedGroup&&L.selectedGroup._id===e._id?{backgroundColor:"#ccc"}:{cursor:"pointer"}},n.a.createElement(Re.a,{avatar:n.a.createElement(z.a,{alt:"user",src:e.photoURL||Ne.a}),title:e.groupName,subheader:n.a.createElement("div",null,"Created Date:",new Date(e.createdAt).toLocaleDateString())})))}))))),n.a.createElement(x.a,{item:!0,sm:9},L.selectedGroup?n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.a.createElement(Z.a,{position:"relative",style:{background:"#37474f"}},n.a.createElement(ee.a,null,n.a.createElement(O.a,{className:a.title,variant:"h6",noWrap:!0},n.a.createElement(Re.a,{avatar:n.a.createElement(z.a,{alt:"user",src:L.selectedGroup.photoURL||Ne.a}),title:L.selectedGroup.groupName})),n.a.createElement("div",{style:{marginRight:"10px",color:"lightblue"}},L.selectedGroup.member.length," Participants"),n.a.createElement("div",null,n.a.createElement(_.a,{title:"Share documents","aria-label":"add"},n.a.createElement($e.a,{size:"small",style:{marginRight:"8px"}},n.a.createElement("input",{accept:"image/*,video/*,application/pdf",className:a.input,id:"icon-button-file",type:"file",onChange:function(e){console.log(e.target.files[0]);var t={name:L.user.firstName+" "+L.user.lastName,photoURL:L.user.photoURL||null,sender:L.user.id,file:e.target.files[0],type:e.target.files[0].type,fileName:e.target.files[0].name,groupId:L.selectedGroup._id};console.log(L),Q.emit("fileupload",t)}}),n.a.createElement("label",{htmlFor:"icon-button-file"},n.a.createElement(F.a,{type:"file","aria-label":"upload picture",component:"span"},n.a.createElement(Ye.a,null))))),L.user.id===L.selectedGroup.owner&&n.a.createElement(_.a,{title:"Add member","aria-label":"add"},n.a.createElement($e.a,{size:"small",onClick:function(){k(!0)}},n.a.createElement(ft.a,null))),n.a.createElement(ot.a,{open:w,onClose:B,"aria-labelledby":"form-dialog-title"},n.a.createElement(pt.a,{id:"form-dialog-title"},"Search User"),n.a.createElement(ut.a,null,n.a.createElement(v.a,{autoFocus:!0,margin:"dense",id:"search",label:"Search",type:"text",fullWidth:!0,onChange:function(e){return t="searchQuery",a=e.target.value,void U(Object(h.a)(Object(h.a)({},L),{},Object(f.a)({},t,a)));var t,a}})),n.a.createElement(lt.a,null,n.a.createElement(x.a,{style:{margin:"10px 0"},container:!0,direction:"column"},L.searchQueryResult&&L.searchQueryResult.map((function(e){return n.a.createElement(x.a,{item:!0,key:e._id},n.a.createElement(_.a,{title:"click for send request","aria-label":"add",style:{cursor:"pointer"}},n.a.createElement(Se.a,{onClick:function(){return X(e._id)}},n.a.createElement(Re.a,{avatar:n.a.createElement(z.a,{alt:"user",src:e.photoURL||Ne.a}),title:e.firstName+" "+e.lastName}))))})))),n.a.createElement(lt.a,null,n.a.createElement(b.a,{onClick:B,color:"primary"},"Cancel"),n.a.createElement(b.a,{onClick:$,color:"primary"},"Search")))))),n.a.createElement("div",{className:"chat-box"},n.a.createElement(x.a,{className:"messages"},D&&n.a.createElement("div",{className:a.root1},n.a.createElement(Ge.a,null)),W&&W.map((function(e){return n.a.createElement(x.a,{item:!0,xs:12,key:e._id,style:{padding:"8px"},ref:t},n.a.createElement("div",{className:"message"},n.a.createElement(z.a,{className:"message-photo",src:e.phtoURL||Ne.a,alt:"message"}),n.a.createElement("div",{className:"message-name"},e.name)),e.file?n.a.createElement(n.a.Fragment,null,-1!==(null===e||void 0===e?void 0:e.type.indexOf("video"))?n.a.createElement("video",{width:"320",height:"240",controls:!0,autoPlay:!0},n.a.createElement("source",{src:"/uploads/".concat(e.file),type:e.typetype})):-1!==(null===e||void 0===e?void 0:e.type.indexOf("image"))?n.a.createElement("img",{className:"message-file",src:"/uploads/".concat(e.file),alt:e.file}):n.a.createElement("div",{className:"message-content"},n.a.createElement("a",{className:"send-link",target:"_blank",rel:"noopener noreferrer",href:"/uploads/"+e.file},e.fileName||"open pdf"))):n.a.createElement("div",{className:"message-content"},e.message))}))),n.a.createElement("form",{className:"message-form",onSubmit:K},n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:1,sm:1},n.a.createElement("div",null,n.a.createElement(we.a,{onClickAway:function(){o(!1)}},n.a.createElement("div",null,n.a.createElement(st.a,{onClick:function(){o((function(e){return!e}))},style:{cursor:"pointer"}}),i?n.a.createElement(tt.a,null,n.a.createElement("div",{className:a.dropdown},n.a.createElement(rt.a,{onEmojiClick:q}))):null)))),n.a.createElement(x.a,{item:!0,xs:9,sm:10},n.a.createElement(v.a,{fullWidth:!0,placeholder:"type a message ",name:"message",variant:"outlined",autoComplete:"off",size:"small",value:L.message,onChange:function(e){return U(Object(h.a)(Object(h.a)({},L),{},{message:e.target.value}))}})),n.a.createElement(x.a,{item:!0,xs:2,sm:1},n.a.createElement($e.a,{style:{width:"40px",height:"40px"},type:"submit"},n.a.createElement(Ze.a,null))))))):n.a.createElement("div",null,0===e.group.groups.length?n.a.createElement("h1",null,"you don't have any group."):n.a.createElement("h1",null,"Click on any group for chatting.")))):n.a.createElement("div",{className:a.root1},n.a.createElement(Ge.a,null)),n.a.createElement(De.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:L.snackbarOpen,onClose:function(){U({snackbarOpen:!1})},autoHideDuration:3e3},n.a.createElement(Te.a,{severity:L.snackbarSeverity,variant:"filled"},L.snackbarMessage)))})),bt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={user:null,snackbarOpen:!1,snackbarMessage:"",snackbarSeverity:"success"},e.connect=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.sendRequest({receiver:a,sender:e.props.userState.user.id});case 2:e.props.request.error?e.setState({snackbarOpen:!0,snackbarMessage:e.props.request.error,snackbarSeverity:"error"}):e.setState({snackbarOpen:!0,snackbarMessage:e.props.request.request.message});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showSnackbar=function(){return n.a.createElement(De.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.state.snackbarOpen,onClose:function(){e.setState({snackbarOpen:!1})},autoHideDuration:3e3},n.a.createElement(Te.a,{severity:e.state.snackbarSeverity,variant:"filled"},e.state.snackbarMessage))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.singleUser(this.props.match.params.id);case 2:return e.next=4,this.setState({user:this.props.userState.oneuser});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a=this;return n.a.createElement("div",{style:{marginLeft:"100px"}},n.a.createElement(Le,null),this.state.user?n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:12,sm:12,md:4},n.a.createElement("img",{height:"300px",width:"300px",alt:"user",src:this.state.user.photoURL||Ne.a}),n.a.createElement("h1",null,"Name: ",this.state.user.firstName+" "+this.state.user.lastName),n.a.createElement("h2",null,"Email: ",this.state.user.email),n.a.createElement("h3",null,"Join date : ",new Date(this.state.user.createdAt).toLocaleDateString())),n.a.createElement(x.a,{item:!0,xs:12,sm:12,md:4},n.a.createElement(_.a,{title:"send Request","aria-label":"add"},n.a.createElement(b.a,{variant:"contained",color:"primary",size:"large",style:{marginLeft:"60px"},onClick:function(){return a.connect(a.state.user._id)}},"connect")),n.a.createElement("h1",null,"Friends"),null===(e=this.state.user)||void 0===e?void 0:e.friends.map((function(e){return n.a.createElement("div",{key:e._id},n.a.createElement(Se.a,{className:"friend"},n.a.createElement(Re.a,{avatar:n.a.createElement(z.a,{alt:"user",src:e.photoURL||Ne.a}),title:e.firstName+" "+e.lastName})))}))),n.a.createElement(x.a,{item:!0,xs:12,sm:12,md:4},n.a.createElement("div",null,n.a.createElement("h3",null,"last login date: ",new Date(this.state.user.updatedAt).toLocaleDateString())),n.a.createElement("h1",null,"Groups"),null===(t=this.state.user)||void 0===t?void 0:t.group.map((function(e){return n.a.createElement("div",{key:e._id},n.a.createElement(Se.a,{className:"friend"},n.a.createElement(Re.a,{avatar:n.a.createElement(z.a,{alt:"user",src:e.photoURL||Ne.a}),title:e.groupName})))})))):n.a.createElement("div",{className:"loader"},n.a.createElement(Ge.a,null)),this.showSnackbar())}}]),a}(r.Component),Et=Object(N.b)((function(e){return{userState:e.userState,request:e.requestReducer}}),{allUser:U,sendRequest:Ie,singleUser:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,R.a.defaults.withCredentials=!0,t.next=4,R()("/users/".concat(e));case 4:r=t.sent,n=r.data,a({type:"SINGLEUSER",payload:{oneuser:n}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})(bt),vt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(be.a,null,n.a.createElement(k.a,{path:"/",component:Pe,exact:!0}),n.a.createElement(k.a,{path:"/login",component:G,exact:!0}),n.a.createElement(k.a,{path:"/register",component:Q,exact:!0}),n.a.createElement(k.a,{path:"/forgotPassword",component:V,exact:!0}),n.a.createElement(k.a,{path:"/Profile",component:ze,exact:!0}),n.a.createElement(k.a,{path:"/resetPassword/:email",component:Be,exact:!0}),n.a.createElement(k.a,{path:"/friend",component:it,exact:!0}),n.a.createElement(k.a,{path:"/group",component:gt,exact:!0}),n.a.createElement(k.a,{path:"/user/:id",component:Et})))}}]),a}(r.Component),yt=a(64),xt={user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,isAuthenticated:localStorage.getItem("isAuth")||!1,info:null,error:null,users:null,useremail:null,oneuser:null,search:null},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"REGISTER":var n=Object.assign(e,r);return n;case"LOGIN":return r.user&&(localStorage.setItem("user",JSON.stringify(r.user)),localStorage.setItem("isAuth",!0)),Object.assign(e,r);case"LOGOUT":return localStorage.removeItem("user"),localStorage.removeItem("isAuth"),Object(h.a)(Object(h.a)({},e),{},{user:null,isAuthenticated:!1});case"ALLUSER":return Object.assign(e,r);case"FORGOTPASSWORD":var s=Object.assign(e,r);return s;case"UPDATEUSER":var c=Object(h.a)(Object(h.a)({},e.user),{},{photoURL:r.photoURL,firstName:r.firstName,lastName:r.lastName});return localStorage.setItem("user",JSON.stringify(c)),Object(h.a)(Object(h.a)({},e),{},{user:c});case"CHANGEPASSWORD":return r.user&&localStorage.setItem("user",JSON.stringify(r.user)),Object.assign(e,r);case"SINGLEUSER":return Object.assign(e,r);default:return e}},jt={request:null,error:null,requests:null,update:null,friends:null},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"REQUEST":var n=Object.assign(e,r);return n;case"ALLREQUEST":case"UPDATEREQUEST":case"FRIENDS":return Object.assign(e,r);default:return e}},kt=a(160),Nt={group:null,error:null,info:null,groups:null,searchQuery:null,message:null},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"CREATEGROUP":return Object(h.a)(Object(h.a)({},e),{},{group:r.group,error:r.error});case"FINDGROUP":return Object(h.a)(Object(h.a)({},e),{},{groups:r});case"SEARCHUSER":return Object.assign(e,r);case"ALLMESSAGE":return Object(h.a)(Object(h.a)({},e),{},{message:r});default:return e}},Rt={messages:[],singleMessages:[]},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"ALLMESSAGE":case"SINGLECHAT":return Object.assign(e,r);default:return e}},Lt=Object(yt.c)({userState:Ot,requestReducer:wt,groupReducer:St,chatReducer:Ct}),Ut=Object(yt.d)(Lt,Object(yt.a)(kt.a));a(229);c.a.render(n.a.createElement(N.a,{store:Ut},n.a.createElement(vt,null)),document.getElementById("root"))},60:function(e,t,a){e.exports=a.p+"static/media/ouricon.f99d5df3.jpg"}},[[173,1,2]]]);
//# sourceMappingURL=main.65f79803.chunk.js.map